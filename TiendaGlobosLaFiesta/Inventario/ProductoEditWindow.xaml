<Window x:Class="TiendaGlobosLaFiesta.Views.ProductoEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Editar/Agregar Producto" Height="550" Width="720"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="#FFF8FBFF"
        Loaded="Window_Loaded"
        KeyDown="Window_KeyDown">

    <Window.Resources>
        <!-- Estilo uniforme para TextBox en error -->
        <Style TargetType="TextBox" x:Key="TextBoxErrorStyle">
            <Style.Triggers>
                <Trigger Property="Tag" Value="error">
                    <Setter Property="BorderBrush" Value="Red"/>
                    <Setter Property="BorderThickness" Value="2"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Estilo uniforme para ComboBox en error -->
        <Style TargetType="ComboBox" x:Key="ComboBoxErrorStyle">
            <Style.Triggers>
                <Trigger Property="Tag" Value="error">
                    <Setter Property="BorderBrush" Value="Red"/>
                    <Setter Property="BorderThickness" Value="2"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Border CornerRadius="10" BorderBrush="#0078D7" BorderThickness="2" Margin="10" Padding="10">
        <StackPanel Margin="10">

            <TextBlock Text="🛒 Agregar/Editar Producto" FontSize="24" FontWeight="Bold"
                       Foreground="#0078D7" HorizontalAlignment="Center" Margin="0,0,0,20"/>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Grupo General -->
                <GroupBox Header="General" Grid.Column="0" Margin="5">
                    <StackPanel>
                        <TextBlock Text="ID Producto:" FontWeight="Bold"/>
                        <TextBox x:Name="txtProductoId" Height="30" IsReadOnly="True" Margin="0,0,0,10"/>

                        <TextBlock Text="Nombre:" FontWeight="Bold"/>
                        <TextBox x:Name="txtNombre" Height="30" Margin="0,0,0,10"
                                 Style="{StaticResource TextBoxErrorStyle}"
                                 ToolTip="Ingrese el nombre del producto, ej. Globo rojo 12''"
                                 GotFocus="ClearPlaceholder" LostFocus="RestorePlaceholder"
                                 Text="Ej. Globo rojo 12''"/>

                        <TextBlock Text="Unidad:" FontWeight="Bold"/>
                        <TextBox x:Name="txtUnidad" Height="30" Margin="0,0,0,10"
                                 Style="{StaticResource TextBoxErrorStyle}"
                                 PreviewTextInput="TxtNumero_PreviewTextInput"
                                 ToolTip="Ingrese el número de unidades, ej. 1, 5, 10"
                                 Text="1"/>

                        <TextBlock Text="Costo:" FontWeight="Bold"/>
                        <TextBox x:Name="txtCosto" Height="30" Margin="0,0,0,10"
                                 Style="{StaticResource TextBoxErrorStyle}"
                                 PreviewTextInput="TxtDecimal_PreviewTextInput"
                                 ToolTip="Ingrese el costo en pesos, ej. 15.50"
                                 Text="0.00"/>

                        <TextBlock Text="Stock:" FontWeight="Bold"/>
                        <TextBox x:Name="txtStock" Height="30" Margin="0,0,0,10"
                                 Style="{StaticResource TextBoxErrorStyle}"
                                 PreviewTextInput="TxtNumero_PreviewTextInput"
                                 ToolTip="Ingrese el stock inicial, ej. 50"
                                 Text="0"/>
                    </StackPanel>
                </GroupBox>

                <!-- Grupo Proveedor / Categoría -->
                <GroupBox Header="Proveedor / Categoría" Grid.Column="1" Margin="5">
                    <StackPanel>
                        <TextBlock Text="Proveedor:" FontWeight="Bold"/>
                        <ComboBox x:Name="cmbProveedor" Height="30" Margin="0,0,0,10"
                                  Style="{StaticResource ComboBoxErrorStyle}"
                                  ToolTip="Seleccione un proveedor"
                                  IsEditable="True" StaysOpenOnEdit="True" IsTextSearchEnabled="True"
                                  Text="Seleccione..."/>

                        <TextBlock Text="Categoría:" FontWeight="Bold"/>
                        <ComboBox x:Name="cmbCategoria" Height="30" Margin="0,0,0,10"
                                  Style="{StaticResource ComboBoxErrorStyle}"
                                  ToolTip="Seleccione una categoría"
                                  IsEditable="True" StaysOpenOnEdit="True" IsTextSearchEnabled="True"
                                  Text="Seleccione..."/>
                    </StackPanel>
                </GroupBox>
            </Grid>

            <!-- Mensaje de éxito -->
            <TextBlock x:Name="lblMensaje" Foreground="Green" FontWeight="Bold"
                       HorizontalAlignment="Center" Margin="0,10,0,0" Visibility="Collapsed"/>

            <!-- Botones -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                <Button Content="💾 Guardar" Width="140" Height="35" Background="#0078D7" Foreground="White"
                        FontWeight="Bold" Margin="10,0" Click="Guardar_Click"/>
                <Button Content="💾 Guardar y agregar otro" Width="180" Height="35" Background="#28A745" Foreground="White"
                        FontWeight="Bold" Margin="10,0" Click="GuardarYAgregar_Click"/>
                <Button Content="❌ Cancelar" Width="140" Height="35" Background="#D9534F" Foreground="White"
                        FontWeight="Bold" Margin="10,0" Click="Cancelar_Click"/>
            </StackPanel>
        </StackPanel>
    </Border>
</Window>